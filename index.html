<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>סימולטור סידור עבודה - רכבת קלה</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&display=swap');
        body { font-family: 'Heebo', sans-serif; }
        .shift-card:hover { transform: translateY(-2px); transition: 0.2s; }
    </style>
</head>
<body class="bg-gray-100 p-8">

    <div class="max-w-7xl mx-auto">
        <header class="flex justify-between items-center mb-8 bg-white p-6 rounded-xl shadow-sm">
            <div>
                <h1 class="text-3xl font-bold text-blue-900">מערכת בקרה ושיבוץ - הקו האדום</h1>
                <p class="text-gray-500">סימולציה של 34 תחנות | 15 בקרים | משימות חודשיות</p>
            </div>
            <button onclick="generateSchedule()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold transition">
                ייצר סידור עבודה שבועי
            </button>
        </header>

        <!-- KPI Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-white p-4 rounded-lg shadow-sm border-r-4 border-blue-500">
                <div class="text-sm text-gray-500">סה"כ תחנות</div>
                <div class="text-2xl font-bold">34</div>
            </div>
            <div class="bg-white p-4 rounded-lg shadow-sm border-r-4 border-green-500">
                <div class="text-sm text-gray-500">בקרים פעילים</div>
                <div class="text-2xl font-bold">15</div>
            </div>
            <div class="bg-white p-4 rounded-lg shadow-sm border-r-4 border-yellow-500">
                <div class="text-sm text-gray-500">משימות לביצוע החודש</div>
                <div class="text-2xl font-bold">136</div>
            </div>
            <div class="bg-white p-4 rounded-lg shadow-sm border-r-4 border-red-500">
                <div class="text-sm text-gray-500">יעד שעות חודשי</div>
                <div class="text-2xl font-bold">2,000</div>
            </div>
        </div>

        <!-- Schedule Table -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <table class="w-full text-right">
                <thead class="bg-gray-50 border-b">
                    <tr>
                        <th class="p-4">יום</th>
                        <th class="p-4">בקר</th>
                        <th class="p-4">שעות</th>
                        <th class="p-4">משימה / תחנה</th>
                        <th class="p-4">סטטוס חריגה</th>
                    </tr>
                </thead>
                <tbody id="scheduleBody" class="divide-y divide-gray-100">
                    <!-- Data injected here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        const controllers = ["אורי מייזלר", "אינה טימופייב", "אלתי קראו", "בוריס דולציגר", "בוריס ינקין", "בתיה אביה", "גדי בן אור", "דוד סייג", "הרצל שגב", "יוני יוסף", "משה אליהו", "ערן ניצן", "רון טוב", "אברהם גברילביץ'", "יוני ניסן"];
        const stations = ["תחנה מרכזית פ\"ת", "פינסקר", "בלינסון", "דנקנר", "שנקר", "שחם", "גשר אם המושבות", "אהרונוביץ'", "בן גוריון", "ביאליק", "אבא הלל", "ארלוזורוב", "שאול המלך", "יהודית", "קרליבך", "אלנבי", "אליפלט", "שלמה", "אצטדיון בלומפילד", "עזה", "ארליך", "איסקוב", "הבעש\"ט", "מחרוזת", "העצמאות", "רוטשילד", "ז'בוטינסקי", "בלפור", "בנימין", "יוספטל", "כ\"ט בנובמבר", "העמל", "הקוממיות", "פארק דרום"];
        const missions = ["On-Board", "קרונות", "תחנות", "בטיחות"];
        const days = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "מוצ\"ש"];

        function generateSchedule() {
            const tbody = document.getElementById('scheduleBody');
            tbody.innerHTML = '';
            
            let currentMissionIdx = 0;

            days.forEach((day, dayIdx) => {
                // סימולציה של 6 בקרים ביום
                let dailyControllers = [...controllers].sort(() => 0.5 - Math.random()).slice(0, 6);
                
                dailyControllers.forEach((name, i) => {
                    let start = 6 + i;
                    let end = start + 9 + (Math.random() > 0.5 ? 1 : 0);
                    
                    // חוקי סופ"ש
                    if(day === "שישי") { start = 6; end = 15; }
                    if(day === "מוצ\"ש") { start = 19; end = 24; }

                    const duration = end - start;
                    const station = stations[Math.floor(Math.random() * stations.length)];
                    const mission = missions[Math.floor(Math.random() * missions.length)];
                    
                    const row = `
                        <tr class="hover:bg-blue-50 transition">
                            <td class="p-4 font-bold text-blue-600">${day}</td>
                            <td class="p-4">${name}</td>
                            <td class="p-4">${start.toString().padStart(2, '0')}:00 - ${end.toString().padStart(2, '0')}:00</td>
                            <td class="p-4">
                                <span class="bg-gray-100 text-xs px-2 py-1 rounded border">${mission}</span>
                                <span class="mr-2 font-medium">${station}</span>
                            </td>
                            <td class="p-4">
                                ${duration > 9 ? '<span class="text-red-500 font-bold">⚠️ חריגת 9 שעות</span>' : '<span class="text-green-500">תקין</span>'}
                            </td>
                        </tr>
                    `;
                    tbody.innerHTML += row;
                });
            });
        }

        // Initial run
        window.onload = generateSchedule;
    </script>
</body>
</html>
